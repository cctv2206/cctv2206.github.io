module.exports=__NEXT_REGISTER_PAGE("/campaigns/requests",function(){var e=webpackJsonp([6],{864:function(e,t,r){e.exports=r(865)},865:function(e,t,r){"use strict";Object.defineProperty(t,"__esModule",{value:true});var n=r(33);var a=r.n(n);var o=r(0);var u=r.n(o);var l=r(41);var s=r(62);var i=r.n(s);var c=r(86);var p=r(87);var f=r(51);var v=function(){function e(e,t){for(var r=0;r<t.length;r++){var n=t[r];n.enumerable=n.enumerable||false;n.configurable=true;"value"in n&&(n.writable=true);Object.defineProperty(e,n.key,n)}}return function(t,r,n){r&&e(t.prototype,r);n&&e(t,n);return t}}();function h(e){return function(){var t=e.apply(this,arguments);return new Promise(function(e,r){function n(a,o){try{var u=t[a](o);var l=u.value}catch(e){r(e);return}if(!u.done)return Promise.resolve(l).then(function(e){n("next",e)},function(e){n("throw",e)});e(l)}return n("next")})}}function m(e,t){if(!(e instanceof t))throw new TypeError("Cannot call a class as a function")}function d(e,t){if(!e)throw new ReferenceError("this hasn't been initialised - super() hasn't been called");return!t||"object"!==typeof t&&"function"!==typeof t?e:t}function y(e,t){if("function"!==typeof t&&null!==t)throw new TypeError("Super expression must either be null or a function, not "+typeof t);e.prototype=Object.create(t&&t.prototype,{constructor:{value:e,enumerable:false,writable:true,configurable:true}});t&&(Object.setPrototypeOf?Object.setPrototypeOf(e,t):e.__proto__=t)}var b=function(e){y(t,e);function t(){var e,r=this;var n,o,u;m(this,t);for(var l=arguments.length,s=Array(l),i=0;i<l;i++)s[i]=arguments[i];return u=(n=(o=d(this,(e=t.__proto__||Object.getPrototypeOf(t)).call.apply(e,[this].concat(s))),o),o.onApprove=function(){var e=h(a.a.mark(function e(t){var n,u;return a.a.wrap(function e(t){while(1)switch(t.prev=t.next){case 0:n=Object(p["a"])(o.props.address);t.next=3;return f["a"].eth.getAccounts();case 3:u=t.sent;t.next=6;return n.methods.approveRequest(o.props.id).send({from:u[0]});case 6:case"end":return t.stop()}},e,r)}));return function(t){return e.apply(this,arguments)}}(),o.onFinalize=function(){var e=h(a.a.mark(function e(t){var n,u;return a.a.wrap(function e(t){while(1)switch(t.prev=t.next){case 0:n=Object(p["a"])(o.props.address);t.next=3;return f["a"].eth.getAccounts();case 3:u=t.sent;t.next=6;return n.methods.finalizeRequest(o.props.id).send({from:u[0]});case 6:case"end":return t.stop()}},e,r)}));return function(t){return e.apply(this,arguments)}}(),n),d(o,u)}v(t,[{key:"render",value:function e(){var t=l["n"].Row,r=l["n"].Cell;var n=this.props.request,a=n.description,o=n.value,s=n.approvalCount,i=n.recipient,c=n.complete;var p=s>this.props.approversCount/2;return u.a.createElement(t,{disabled:c,positive:p&&!c},u.a.createElement(r,null,"#"+(this.props.id+1)),u.a.createElement(r,null,a),u.a.createElement(r,null,f["a"].utils.fromWei(o,"ether")),u.a.createElement(r,null,i),u.a.createElement(r,null,s+"/"+this.props.approversCount),u.a.createElement(r,null,c?null:u.a.createElement(l["a"],{color:"green",basic:true,onClick:this.onApprove},"Approve")),u.a.createElement(r,null,c?null:u.a.createElement(l["a"],{color:"teal",basic:true,onClick:this.onFinalize},"Finalize")))}}]);return t}(o["Component"]);var E=b;var w=function(){function e(e,t){for(var r=0;r<t.length;r++){var n=t[r];n.enumerable=n.enumerable||false;n.configurable=true;"value"in n&&(n.writable=true);Object.defineProperty(e,n.key,n)}}return function(t,r,n){r&&e(t.prototype,r);n&&e(t,n);return t}}();function _(e){return function(){var t=e.apply(this,arguments);return new Promise(function(e,r){function n(a,o){try{var u=t[a](o);var l=u.value}catch(e){r(e);return}if(!u.done)return Promise.resolve(l).then(function(e){n("next",e)},function(e){n("throw",e)});e(l)}return n("next")})}}function g(e,t){if(!(e instanceof t))throw new TypeError("Cannot call a class as a function")}function O(e,t){if(!e)throw new ReferenceError("this hasn't been initialised - super() hasn't been called");return!t||"object"!==typeof t&&"function"!==typeof t?e:t}function x(e,t){if("function"!==typeof t&&null!==t)throw new TypeError("Super expression must either be null or a function, not "+typeof t);e.prototype=Object.create(t&&t.prototype,{constructor:{value:e,enumerable:false,writable:true,configurable:true}});t&&(Object.setPrototypeOf?Object.setPrototypeOf(e,t):e.__proto__=t)}var C=function(e){x(t,e);function t(){g(this,t);return O(this,(t.__proto__||Object.getPrototypeOf(t)).apply(this,arguments))}w(t,[{key:"renderRows",value:function e(){var t=this;return this.props.requests.map(function(e,r){return u.a.createElement(E,{request:e,id:r,key:"request-"+r,address:t.props.address,approversCount:t.props.approversCount})})}},{key:"render",value:function e(){var t=l["n"].Header,r=l["n"].Row,n=l["n"].HeaderCell,a=l["n"].Body;return u.a.createElement(c["a"],null,u.a.createElement("h3",null,"Requests List"),u.a.createElement(s["Link"],{route:"/campaigns/"+this.props.address+"/requests/new"},u.a.createElement("a",null,u.a.createElement(l["a"],{primary:true,floated:"right",style:{marginBottom:10}},"Add Request"))),u.a.createElement(l["n"],{textAlign:"center"},u.a.createElement(t,null,u.a.createElement(r,null,u.a.createElement(n,null,"ID"),u.a.createElement(n,null,"Description"),u.a.createElement(n,null,"Amount (ether)"),u.a.createElement(n,null,"Recipient"),u.a.createElement(n,null,"Approval Count"),u.a.createElement(n,null,"Approve"),u.a.createElement(n,null,"Finalize"))),u.a.createElement(a,null,this.renderRows())),u.a.createElement("div",null,"Found ",this.props.requestCount," requests."))}}],[{key:"getInitialProps",value:function(){var e=_(a.a.mark(function e(t){var r,n,o,u,l;return a.a.wrap(function e(a){while(1)switch(a.prev=a.next){case 0:r=t.query.address;n=Object(p["a"])(r);a.next=4;return n.methods.getRequestsCount().call();case 4:o=a.sent;a.next=7;return n.methods.approversCount().call();case 7:u=a.sent;a.next=10;return Promise.all(Array(parseInt(o,10)).fill().map(function(e,t){return n.methods.requests(t).call()}));case 10:l=a.sent;return a.abrupt("return",{address:r,requests:l,requestCount:o,approversCount:u});case 12:case"end":return a.stop()}},e,this)}));function t(t){return e.apply(this,arguments)}return t}()}]);return t}(o["Component"]);var q=t["default"]=C}},[864]);return{page:e.default}});